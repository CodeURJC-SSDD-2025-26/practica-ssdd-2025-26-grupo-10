<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>EcoMóstoles | Simbiosis Industrial</title>
    <!-- Bootstrap 5 CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <!-- Custom CSS -->
    <link href="css/styles.css" rel="stylesheet">
    <!-- Font Awesome (Optional for Icons) -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
</head>
<body class="bg-theme-dark">
    <!-- Particles: Body (Fixed Background) -->
    <div id="particles-body"></div>

    <!-- Navbar -->
    <nav class="navbar navbar-expand-lg fixed-top navbar-custom">
        <div class="container">
            <a class="navbar-brand" href="index.html">
                <i class="fas fa-recycle me-2"></i>EcoMóstoles
            </a>
            <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav">
                <span class="navbar-toggler-icon"></span>
            </button>
            <div class="collapse navbar-collapse" id="navbarNav">
                <ul class="navbar-nav ms-auto align-items-center">
                    <li class="nav-item">
                        <a class="nav-link active" href="index.html">Inicio</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="mercado.html">Ofertas</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="login.html">Login</a>
                    </li>
                    <li class="nav-item ms-lg-2">
                        <a class="btn btn-eco btn-sm" href="registro.html">Registro Empresa</a>
                    </li>
                </ul>
            </div>
        </div>
    </nav>

    <!-- Hero Section -->
    <header class="hero-section text-center">
        <!-- Particles: Hero (Absolute inside Header) -->
        <div id="particles-hero"></div>
        <div class="container position-relative" style="z-index: 2;">
            <h1 class="display-4 fw-bold mb-4">Convierte tus residuos en recursos</h1>
            <p class="lead mb-5 col-lg-8 mx-auto text-light-muted">Conectamos empresas del Polígono Regordoño y alrededores para fomentar la economía circular.</p>
            <a href="registro.html" class="btn btn-glow btn-lg px-5">Únete a la Simbiosis</a>
        </div>
    </header>

    <!-- Featured Offers Grid -->
    <section id="ofertas" class="py-5">
        <div class="container">
            <h2 class="text-center mb-5 text-uppercase fw-bold text-secondary">Ofertas Recientes</h2>
            <div class="row g-4">
                
                <!-- Card 1 -->
                <div class="col-md-4">
                    <div class="card h-100 border-top-success">
                        <!-- PARA CAMBIAR FOTO: 
                             1. Guarda tu foto en la carpeta 'img' (ej: viruta.jpg)
                             2. Cambia el src abajo: src="img/viruta.jpg" 
                        -->
                        <img src="https://placehold.co/600x400/34495e/FFF?text=Viruta+Acero" class="card-img-top" alt="Viruta de Acero">
                        <div class="card-body">
                            <h5 class="card-title fw-bold">Viruta de Acero (500kg)</h5>
                            <p class="card-text text-muted small"><i class="fas fa-industry me-1"></i> Metales del Sur S.L.</p>
                            <span class="badge bg-success mb-2">Residuo Metálico</span>
                            <p class="card-text mt-2">Excelente calidad para fundición. Disponible para recogida inmediata en Polígono Regordoño.</p>
                            <div class="d-grid mt-3">
                                <a href="detalle_activo.html" class="btn btn-outline-secondary btn-sm">Ver Detalles</a>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Card 2 -->
                <div class="col-md-4">
                    <div class="card h-100 border-top-primary">
                         <img src="https://placehold.co/600x400/2ecc71/FFF?text=Montacargas" class="card-img-top" alt="Montacargas">
                        <div class="card-body">
                            <h5 class="card-title fw-bold">Alquiler Montacargas 2T</h5>
                            <p class="card-text text-muted small"><i class="fas fa-warehouse me-1"></i> Logística Móstoles S.A.</p>
                            <span class="badge bg-primary mb-2">Maquinaria</span>
                            <p class="card-text mt-2">Disponible por días o semanas. Incluye seguro. Ideal para picos de trabajo.</p>
                            <div class="d-grid mt-3">
                                <a href="detalle_activo.html" class="btn btn-outline-secondary btn-sm">Ver Detalles</a>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Card 3 -->
                <div class="col-md-4">
                    <div class="card h-100 border-top-warning">
                        <img src="https://placehold.co/600x400/f1c40f/000?text=Palets" class="card-img-top" alt="Palets Madera">
                        <div class="card-body">
                            <h5 class="card-title fw-bold">Palets de Madera (x200)</h5>
                            <p class="card-text text-muted small"><i class="fas fa-building me-1"></i> Muebles García e Hijos</p>
                            <span class="badge bg-warning text-dark mb-2">Residuo Madera</span>
                            <p class="card-text mt-2">Palets usados en buen estado. Se regalan a cambio de recogida. Urge liberar espacio.</p>
                            <div class="d-grid mt-3">
                                <a href="detalle_activo.html" class="btn btn-outline-secondary btn-sm">Ver Detalles</a>
                            </div>
                        </div>
                    </div>
                </div>

            </div>
            
            <div class="text-center mt-5">
                <a href="mercado.html" class="btn btn-outline-secondary">Ver todas las ofertas <i class="fas fa-arrow-right ms-1"></i></a>
            </div>
        </div>
    </section>

    <!-- Footer -->
    <footer class="bg-white text-secondary py-5 border-top mt-auto">
        <div class="container text-center">
            <div class="row align-items-center">
                <div class="col-md-4 text-md-start">
                    <h5 class="mb-0 fw-bold text-dark"><i class="fas fa-recycle text-success"></i> EcoMóstoles</h5>
                    <small>Plataforma de Simbiosis Industrial</small>
                </div>
                <div class="col-md-4 my-3 my-md-0">
                    <small>&copy; 2024 EcoMóstoles. Todos los derechos reservados.</small>
                </div>
                <div class="col-md-4 text-md-end">
                    <a href="#" class="text-secondary me-3"><i class="fab fa-linkedin fa-lg"></i></a>
                    <a href="#" class="text-secondary me-3"><i class="fab fa-twitter fa-lg"></i></a>
                    <a href="#" class="text-secondary"><i class="fas fa-envelope fa-lg"></i></a>
                </div>
            </div>
        </div>
    </footer>

    <!-- Bootstrap Bundle with Popper -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>

    <!-- Particles.js -->
    <script src="https://cdn.jsdelivr.net/npm/particles.js@2.0.0/particles.min.js"></script>
    <script>
        /* --- EFFECT 1: CUSTOM HERO VORTEX (Canvas API) --- */
        (function() {
            const container = document.getElementById('particles-hero');
            const canvas = document.createElement('canvas');
            const ctx = canvas.getContext('2d');
            
            canvas.style.width = '100%';
            canvas.style.height = '100%';
            canvas.style.position = 'absolute';
            canvas.style.top = '0';
            canvas.style.left = '0';
            container.appendChild(canvas);

            let width, height;
            let particles = [];
            
            // Configuration
            const particleCount = 150;
            const ringRadius = 250; /* Base radius of the vortex */
            const ringWidth = 100; /* Spread of the ring */
            
            function resize() {
                width = container.offsetWidth;
                height = container.offsetHeight;
                canvas.width = width;
                canvas.height = height;
            }

            class Particle {
                constructor() {
                    this.angle = Math.random() * Math.PI * 2;
                    this.radius = ringRadius + (Math.random() - 0.5) * ringWidth;
                    this.baseRadius = this.radius;
                    this.speed = 0.005 + Math.random() * 0.01; /* Rotation speed */
                    this.size = 2 + Math.random() * 2;
                    this.x = 0;
                    this.y = 0;
                }

                update(mouseX, mouseY) {
                    // 1. Orbital Movement (Always rotates)
                    this.angle += this.speed;
                    
                    // Base orbital position
                    let orbitX = width/2 + Math.cos(this.angle) * this.baseRadius;
                    let orbitY = height/2 + Math.sin(this.angle) * this.baseRadius;

                    // 2. Mouse Interaction (Local Repulsion/Parting)
                    let interactX = 0;
                    let interactY = 0;

                    if (mouseX !== null) {
                        const dx = mouseX - orbitX;
                        const dy = mouseY - orbitY;
                        const dist = Math.sqrt(dx*dx + dy*dy);
                        
                        // Interaction Radius: 120px (Local Only)
                        if (dist < 120) { 
                             const force = (120 - dist) / 120;
                             const angle = Math.atan2(dy, dx);
                             // Push away from mouse
                             interactX = -Math.cos(angle) * force * 50; 
                             interactY = -Math.sin(angle) * force * 50;
                        }
                    }

                    // Apply position with interaction offset
                    this.x = orbitX + interactX;
                    this.y = orbitY + interactY;
                }

                draw() {
                    ctx.beginPath();
                    ctx.arc(this.x, this.y, this.size, 0, Math.PI * 2);
                    ctx.fillStyle = `rgba(255, 255, 255, ${0.5 + Math.random()*0.5})`; /* Twinkle */
                    ctx.fill();
                }
            }

            function init() {
                resize();
                for (let i = 0; i < particleCount; i++) {
                    particles.push(new Particle());
                }
                animate();
            }

            // Mouse tracking
            let mouseX = null;
            let mouseY = null;
            window.addEventListener('mousemove', (e) => {
                const rect = canvas.getBoundingClientRect();
                if (e.clientY >= rect.top && e.clientY <= rect.bottom) {
                    mouseX = e.clientX - rect.left;
                    mouseY = e.clientY - rect.top;
                } else {
                    mouseX = null;
                }
            });

            window.addEventListener('resize', resize);

            function animate() {
                ctx.clearRect(0, 0, width, height);
                particles.forEach(p => {
                    p.update(mouseX, mouseY);
                    p.draw();
                });
                requestAnimationFrame(animate);
            }

            init();
        })();

        /* --- EFFECT 2: BODY SYMBIOSIS RESTORED (Green Repulsion) --- */
        particlesJS("particles-body", {
            "particles": {
                "number": { "value": 80, "density": { "enable": true, "value_area": 800 } },
                "color": { "value": "#198754" }, /* Brand Green */
                "shape": { "type": "circle" },
                "opacity": { "value": 0.5, "random": false },
                "size": { "value": 3, "random": true },
                "line_linked": { 
                    "enable": true, 
                    "distance": 150, 
                    "color": "#198754", 
                    "opacity": 0.3, /* Subtle but visible */
                    "width": 1 
                },
                "move": { "enable": true, "speed": 2, "direction": "none", "random": false, "straight": false, "out_mode": "out", "bounce": false }
            },
            "interactivity": {
                "detect_on": "window", 
                "events": {
                    "onhover": { "enable": true, "mode": "repulse" }, /* Flee from mouse */
                    "onclick": { "enable": true, "mode": "push" },
                    "resize": true
                },
                "modes": {
                    "repulse": { "distance": 150, "duration": 0.4 }, /* Standard Repulsion */
                    "push": { "particles_nb": 4 }
                }
            },
            "retina_detect": true
        });
    </script>
    <script src="js/card-spotlight.js"></script>
</body>
</html>
